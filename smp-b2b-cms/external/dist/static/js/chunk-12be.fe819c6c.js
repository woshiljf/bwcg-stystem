(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-12be"],{"/f1G":function(t,e,a){t.exports={default:a("nhzr"),__esModule:!0}},C0UL:function(t,e,a){},CyVQ:function(t,e,a){"use strict";var o=a("C0UL");a.n(o).a},E8gZ:function(t,e,a){var o=a("w6GO"),r=a("NsO/"),i=a("NV0k").f;t.exports=function(t){return function(e){for(var a,s=r(e),n=o(s),l=n.length,c=0,d=[];l>c;)i.call(s,a=n[c++])&&d.push(t?[a,s[a]]:s[a]);return d}}},JGVM:function(t,e,a){"use strict";a.d(e,"c",function(){return r}),a.d(e,"d",function(){return i}),a.d(e,"f",function(){return s}),a.d(e,"g",function(){return n}),a.d(e,"b",function(){return l}),a.d(e,"k",function(){return c}),a.d(e,"l",function(){return d}),a.d(e,"j",function(){return p}),a.d(e,"i",function(){return u}),a.d(e,"h",function(){return m}),a.d(e,"e",function(){return f}),a.d(e,"a",function(){return h});var o=a("t3Un");function r(t){return Object(o.a)({url:"/order/order/external/orderList",method:"post",params:t,data:t})}function i(t){return Object(o.a)({url:"/order/order/external/orderDetail",method:"get",params:{orderNo:t}})}function s(t){return Object(o.a)({url:"/order/order/confirmedB2BOrder",method:"get",params:t})}function n(t){return Object(o.a)({url:"/order/attachment/upload/paymentVoucher",method:"post",data:t})}function l(t){return Object(o.a)({url:"/order/attachment/upload/verifyPaymentVoucher",method:"post",data:t})}function c(t){return Object(o.a)({url:"/order/order/buildShippingList",method:"get",params:t})}function d(t){return Object(o.a)({url:"/order/order/verifyShippingList",method:"get",params:t})}function p(t){return Object(o.a)({url:"/order/attachment/upload/packingList",method:"post",data:t})}function u(t){return Object(o.a)({url:"/order/attachment/upload/outboundOrder",method:"post",data:t})}function m(t){return Object(o.a)({url:"/order/attachment/upload/reUploadOrder",method:"post",data:t})}function f(t){return Object(o.a)({url:"/order/order/modifyB2BShipmentType",method:"get",params:t})}function h(t){return Object(o.a)({url:"/order/order/createB2BOrder",method:"post",params:t,data:t})}},"a//Y":function(t,e,a){"use strict";var o=a("tu2+");a.n(o).a},fW1p:function(t,e,a){var o=a("Y7ZC"),r=a("E8gZ")(!1);o(o.S,"Object",{values:function(t){return r(t)}})},hyOM:function(t,e,a){"use strict";a.r(e);var o=a("/f1G"),r=a.n(o),i=a("QbLZ"),s=a.n(i),n=a("P2sY"),l=a.n(n),c=a("JGVM"),d=a("L2JU"),p={name:"UploadExcel",props:{orderNo:{type:String,default:""},userCode:{type:String,default:""},step:{type:String,default:""}},data:function(){return{temp:{},dialogFormVisible:!1,textMap:{update:"Edit",packing:"出货单号",shipment:"装箱单",sending:"出货单",order:"订单"},dialogStatus:""}},computed:{},created:function(){},methods:{handleUpload:function(t){var e=this;this.dialogStatus=t,this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},updateData:function(){var t=this;console.log(this.orderNo,this.step,"uploadData");var e=this;e.formData=new FormData,e.$refs.uploade.submit(),this.$refs.dataForm.validate(function(a){if(a){if(e.formData.append("orderNo",t.orderNo),e.formData.append("userCode",t.userCode),e.formData.get("file").size/1024/1024>=10)return void t.$notify({title:"错误",message:"上传文件大小不能超过 10MB!",type:"error",duration:3e3});if(!e.formData.get("file"))return void t.$notify({title:"错误",message:"文件不能为空",type:"error",duration:3e3});"shipment"===t.step?Object(c.j)(e.formData).then(function(){t.dialogFormVisible=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.$emit("fetchUploadData",t.orderNo)}):"sending"===t.step?Object(c.i)(e.formData).then(function(){t.dialogFormVisible=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.$emit("fetchUploadData",t.orderNo)}):"order"===t.step&&Object(c.h)(e.formData).then(function(){t.dialogFormVisible=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.$emit("fetchUploadData",t.orderNo)}),e.$refs.uploade.clearFiles()}})},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},handleExceed:function(t,e){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},beforeUpload:function(t){return console.log("beforeUpload"),this.formData.append("file",t),!1}}},u=(a("a//Y"),a("KHd+")),m=Object(u.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:t.temp,"label-position":"left","label-width":"120px"}},[a("el-upload",{ref:"uploade",staticClass:"upload-demo",attrs:{"on-preview":t.handlePreview,"on-remove":t.handleRemove,"before-upload":t.beforeUpload,limit:1,"on-exceed":t.handleExceed,"auto-upload":!1,"list-type":"text",accept:".xls,.xlsx,.xlsm",action:"https://jsonplaceholder.typicode.com/posts/",multiple:""}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("一次只能上传一个excel文件，仅限格式xlsx、xls、xlsm，单个文件不超过10MB")])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("table.cancel")))]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateData()}}},[t._v(t._s(t.$t("table.confirm")))])],1)],1)],1)},[],!1,null,"2873bd6f",null);m.options.__file="uploadExcel.vue";var f=m.exports,h={name:"UploadImage",props:{orderNo:{type:String,default:""},userCode:{type:String,default:""},step:{type:String,default:""}},data:function(){return{temp:{},dialogFormVisible:!1,textMap:{update:"Edit",delivery:"到款凭证",payment:"付款凭证"},dialogStatus:""}},methods:{handleUpload:function(t){var e=this;this.dialogStatus=t,this.dialogFormVisible=!0,this.$nextTick(function(){console.log(e.orderNo),e.$refs.dataForm.clearValidate()})},updateData:function(){var t=this;console.log(this.orderNo,this.step,"uploadData");var e=this;e.formData=new FormData,e.$refs.uploadi.submit(),this.$refs.dataForm.validate(function(a){if(a){if(e.formData.append("orderNo",t.orderNo),e.formData.append("userCode",t.userCode),e.formData.get("file").size/1024/1024>=10)return void t.$notify({title:"错误",message:"上传文件大小不能超过 10MB!",type:"error",duration:3e3});if(!e.formData.get("file"))return void t.$notify({title:"错误",message:"文件不能为空",type:"error",duration:3e3});"payment"===t.step?Object(c.g)(e.formData).then(function(){t.dialogFormVisible=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.$emit("fetchUploadData",t.orderNo)}):"delivery"===t.step&&Object(c.b)(e.formData).then(function(){t.dialogFormVisible=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}),t.$emit("fetchUploadData",t.orderNo)}),e.$refs.uploadi.clearFiles()}})},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},handleExceed:function(t,e){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},beforeUpload:function(t){return console.log("beforeUpload"),this.formData.append("file",t),!1}}},v=(a("y/+g"),Object(u.a)(h,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:t.temp,"label-position":"left","label-width":"120px"}},[a("el-upload",{ref:"uploadi",staticClass:"upload-demo",attrs:{"on-preview":t.handlePreview,"on-remove":t.handleRemove,"before-upload":t.beforeUpload,limit:1,"on-exceed":t.handleExceed,"auto-upload":!1,"list-type":"picture",accept:".png,.jpeg,.jpg",action:"aa",multiple:""}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("一次只能上传一个图片文件，仅限格式png、jpeg、jpg，单个文件不超过10MB")])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("table.cancel")))]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateData()}}},[t._v(t._s(t.$t("table.confirm")))])],1)],1)],1)},[],!1,null,"dffdc0c0",null));v.options.__file="UploadImage.vue";var _={id:void 0},y={name:"TradeDetail",components:{UploadExcel:f,UploadImage:v.exports},filters:{bizTypeFilter:function(t){return{1:"期货",2:"特价"}[t]},dateFilter:function(t){return void 0!==t&&null!==t?t.replace("T"," ").replace(".000+0800","").replace(".000+0000",""):"暂无"},shipmentTypeZhFilter:function(t){return{1:"自提",2:"物流"}[t]},orderStatusZhFilter:function(t){return{10:"待确认",20:"待付款",30:"待核款",40:"已核款",50:"待审核出货单",60:"已审核出货单",70:"已装箱",80:"已出货",99:"订单取消"}[t]}},data:function(){return{postForm:l()({},_),temp:{id:void 0,attachmentInfoList:[],customerCode:void 0,orderNo:void 0,bizType:void 0,shipmentType:void 0,shipmentOrderNo:void 0,state:void 0,userCode:void 0,code:void 0,orderStatus:void 0},shipmentTypeOptions:{"自提（默认)":1,"物流":2},dialogFormVisible:!1,dialogStatus:"",textMap:{update:"修改提货方式"},orderInfo:{},paymentVoucher:{},verifyPaymentVoucher:{},shipment:{},packingList:{},outboundOrder:{},auth:[],step:"",shipmentOrderNoBoole:!1,dialogVisible:!1,tempRoute:{}}},computed:s()({lang:function(){return this.$store.getters.language}},Object(d.b)(["resourceCode"])),mounted:function(){var t=this.$route.params&&this.$route.params.id;this.fetchData(t),this.tempRoute=l()({},this.$route)},methods:{handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(){e.dialogVisible=!1}).catch(function(t){console.log(t)})},fetchData:function(t){var e=this;Object(c.d)(t).then(function(t){e.postForm=t.data.orderDetail,e.temp=t.data.orderDetail,e.temp.shipmentType=parseInt(e.temp.shipmentType),e.temp.state=parseInt(e.temp.state),e.orderInfo=e.temp.orderDto,e.paymentVoucher=e.temp.paymentVoucherDto,e.verifyPaymentVoucher=e.temp.verifyPaymentVoucherDto,e.shipment=e.temp.shipmentDto,e.shipmentOrderNoBoole=!!(null!==e.shipment.shipmentOrderNo&&e.temp.state>=50),e.packingList=e.temp.packingListDto,e.outboundOrder=e.temp.outboundOrderDto,e.auth=r()(t.data.userAuthority.resourceCode),e.dialogVisible=!1,e.setTagsViewTitle()}).catch(function(t){console.log(t)})},setTagsViewTitle:function(){var t=l()({},this.tempRoute,{title:"编辑交易-"+this.postForm.orderNo});this.$store.dispatch("updateVisitedView",t)},handleUpdate:function(){var t=this;this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},handleExcelUpload:function(t){if(this.step=t,"order"===t&&10!==this.temp.state)return this.dialogVisible=!1,void this.notifyNotSupport();!("shipment"===t&&60!==this.temp.state||"sending"===t&&70!==this.temp.state)?this.$refs.uploadExcel.handleUpload(t):this.notifyNotSupport()},handleImageUpload:function(t){this.step=t,!("payment"===t&&20!==this.temp.state||"delivery"===t&&30!==this.temp.state)?this.$refs.uploadImage.handleUpload(t):this.notifyNotSupport()},checkPass:function(){var t=this;if(50===this.temp.state){var e=l()({},{orderNo:this.temp.orderNo});Object(c.l)(e).then(function(){t.notifySuccess(),t.temp.state=60}).catch(function(t){console.log(t)}).finally(function(t){console.log(t)})}else this.notifyNotSupport()},handleAdd:function(){var t=this;if(console.log(this.shipmentOrderNoBoole),this.shipment.shipmentOrderNo)if(this.shipment.shipmentOrderNo.length>=40)this.$notify({title:"错误",message:"出货单号太长",type:"error",duration:2e3});else if(40===this.temp.state){var e=l()({},{orderNo:this.temp.orderNo,shipmentOrderNo:this.shipment.shipmentOrderNo});Object(c.k)(e).then(function(){t.notifySuccess(),t.temp.state=50}).catch(function(t){console.log(t)}).finally(function(t){console.log(t)})}else this.notifyNotSupport();else this.$notify({title:"错误",message:"出货单号不能为空",type:"error",duration:2e3})},orderCheck:function(){var t=this;if(console.log(this.temp.state),10===this.temp.state){var e=l()({},{orderNo:this.temp.orderNo});Object(c.f)(e).then(function(){t.notifySuccess(),t.temp.state=20}).catch(function(t){console.log(t)}).finally(function(t){console.log(t)})}else this.notifyNotSupport()},notHasInfo:function(){this.$notify({title:"错误",message:"暂无文件或暂无权限",type:"error",duration:2e3})},notifySuccess:function(){this.$notify({title:"成功",message:"操作成功",type:"success",duration:2e3})},notifyNotSupport:function(){this.$notify({title:"错误",message:"订单状态不支持",type:"error",duration:2e3})},updateData:function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var a=l()({},{orderNo:t.temp.orderNo,shipmentType:t.temp.shipmentType});Object(c.e)(a).then(function(e){console.log(e,"cccc"),t.dialogFormVisible=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})}).catch(function(t){console.log(t)}).finally(function(t){console.log(t)})}})}}},b=(a("CyVQ"),Object(u.a)(y,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"createPost-container"},[a("div",{staticClass:"createPost-main-container"},[a("el-card",{staticClass:"box-card orderinfo"},[a("el-row",{staticClass:"text item"},[a("el-col",{attrs:{span:3}},[t._v(t._s(t.$t("trade.orderNo"))+":")]),a("el-col",{attrs:{span:3}},[t._v(t._s(t.temp.orderNo))])],1),t._v(" "),a("el-row",{staticClass:"text item"},[a("el-col",{attrs:{span:3}},[t._v(t._s(t.$t("trade.customerCode"))+":")]),a("el-col",{attrs:{span:3}},[t._v(t._s(t.temp.code))])],1),t._v(" "),a("el-row",{staticClass:"text item"},[a("el-col",{attrs:{span:3}},[t._v(t._s(t.$t("trade.bizType"))+":")]),a("el-col",{attrs:{span:3}},[t._v(t._s(t._f("bizTypeFilter")(t.temp.bizType)))])],1),t._v(" "),a("el-row",{staticClass:"text item"},[a("el-col",{attrs:{span:3}},[t._v(t._s(t.$t("trade.orderStatus"))+":")]),a("el-col",{attrs:{span:3}},[t._v(t._s(t._f("orderStatusZhFilter")(t.temp.state)))])],1),t._v(" "),a("el-row",{staticClass:"text item"},[a("el-col",{attrs:{span:3}},[t._v(t._s(t.$t("trade.shipmentType"))+":")]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v(t._s(t._f("shipmentTypeZhFilter")(t.temp.shipmentType))+" ")]),t._v(" "),a("el-col",{attrs:{span:3}},[10!==t.temp.state&&20!==t.temp.state||-1==t.resourceCode.indexOf("modifyB2BShipmentType")?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.handleUpdate}},[t._v(t._s(t.$t("tradeDetail.update")))])],1)],1)],1),t._v(" "),a("el-card",{staticClass:"box-card order"},[a("el-row",{staticClass:"text item"},[a("el-col",{attrs:{span:2}},[a("b",[t._v(t._s(t.$t("tradeDetail.order"))+":")])]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(t._s(t.orderInfo.attachName||"暂无"))]),t._v(" "),a("el-col",{attrs:{span:2}},[t._v(t._s(t.$t("tradeDetail.uploadTime"))+": "),a("br"),a("br"),t._v(t._s(t.$t("tradeDetail.orderConfirmTime"))+": ")]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v(t._s(t._f("dateFilter")(t.orderInfo.createTime))),a("br"),a("br"),t._v(t._s(t._f("dateFilter")(t.orderInfo.confirmTime)))]),t._v(" "),a("el-col",{attrs:{span:8}},[t.orderInfo.attachName&&-1!=t.resourceCode.indexOf("orderExport")?a("a",{attrs:{href:"/order/attachment/download?attachName="+t.orderInfo.attachName+"&orderNo="+t.temp.orderNo+"&attachUsage="+t.orderInfo.attachUsage,target:"_blank"}},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-download"}},[t._v(t._s(t.$t("tradeDetail.export")))])],1):a("a",{on:{click:t.notHasInfo}},[a("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-download"}},[t._v(t._s(t.$t("tradeDetail.export")))])],1),t._v(" "),10===t.temp.state&&-1!=t.resourceCode.indexOf("createOrder")?a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-upload"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(t._s(t.$t("tradeDetail.upload")))]):a("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-upload"}},[t._v(t._s(t.$t("tradeDetail.upload")))]),t._v(" "),10===t.temp.state&&-1!=t.resourceCode.indexOf("confirmOrder")?a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:t.orderCheck}},[t._v(t._s(t.$t("tradeDetail.orderCheck")))]):a("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-check"}},[t._v(t._s(t.$t("tradeDetail.orderCheck")))])],1),t._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:t.temp.state>=20?"success":"info",icon:"el-icon-check",circle:""}})],1)],1)],1),t._v(" "),a("el-card",{staticClass:"box-card payment"},[a("el-row",{staticClass:"text item"},[a("el-col",{attrs:{span:2}},[a("b",[t._v(t._s(t.$t("tradeDetail.payment"))+":")])]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(t._s(t.paymentVoucher.attachName||"暂无"))]),t._v(" "),a("el-col",{attrs:{span:2}},[t._v(t._s(t.$t("tradeDetail.uploadTime"))+": ")]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v(t._s(t._f("dateFilter")(t.paymentVoucher.createTime)))]),t._v(" "),a("el-col",{attrs:{span:8}},[t.paymentVoucher.attachName&&-1!=t.resourceCode.indexOf("paymentVoucherExport")?a("a",{attrs:{href:"/order/attachment/download?attachName="+t.paymentVoucher.attachName+"&orderNo="+t.temp.orderNo+"&attachUsage="+t.paymentVoucher.attachUsage,target:"_blank"}},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-download"}},[t._v(t._s(t.$t("tradeDetail.export")))])],1):a("a",{on:{click:t.notHasInfo}},[a("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-download"}},[t._v(t._s(t.$t("tradeDetail.export")))])],1),t._v(" "),20===t.temp.state&&-1!=t.resourceCode.indexOf("paymentVoucher")?a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-upload"},on:{click:function(e){t.handleImageUpload("payment")}}},[t._v(t._s(t.$t("tradeDetail.upload")))]):a("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-upload"}},[t._v(t._s(t.$t("tradeDetail.upload")))])],1),t._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:t.temp.state>=30?"success":"info",icon:"el-icon-check",circle:""}})],1)],1)],1),t._v(" "),a("el-card",{staticClass:"box-card delivery"},[a("el-row",{staticClass:"text item"},[a("el-col",{attrs:{span:2}},[a("b",[t._v(t._s(t.$t("tradeDetail.delivery"))+":")])]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(t._s(t.verifyPaymentVoucher.attachName||"暂无"))]),t._v(" "),a("el-col",{attrs:{span:2}},[t._v(t._s(t.$t("tradeDetail.uploadTime"))+": ")]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v(t._s(t._f("dateFilter")(t.verifyPaymentVoucher.createTime)))]),t._v(" "),a("el-col",{attrs:{span:8}},[t.verifyPaymentVoucher.attachName&&-1!=t.resourceCode.indexOf("verifyPaymentVoucherExport")?a("a",{attrs:{href:"/order/attachment/download?attachName="+t.verifyPaymentVoucher.attachName+"&orderNo="+t.temp.orderNo+"&attachUsage="+t.verifyPaymentVoucher.attachUsage,target:"_blank"}},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-download"}},[t._v(t._s(t.$t("tradeDetail.export")))])],1):a("a",{on:{click:t.notHasInfo}},[a("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-download"}},[t._v(t._s(t.$t("tradeDetail.export")))])],1),t._v(" "),30===t.temp.state&&-1!=t.resourceCode.indexOf("verifyPaymentVoucher")?a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-upload"},on:{click:function(e){t.handleImageUpload("delivery")}}},[t._v(t._s(t.$t("tradeDetail.upload")))]):a("el-button",{staticClass:"filter-item",attrs:{e:"",type:"info",icon:"el-icon-upload"}},[t._v(t._s(t.$t("tradeDetail.upload")))])],1),t._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:t.temp.state>=40?"success":"info",icon:"el-icon-check",circle:""}})],1)],1)],1),t._v(" "),a("el-card",{staticClass:"box-card packing"},[a("el-form",{attrs:{model:t.temp}},[a("el-row",{staticClass:"text item"},[a("el-col",{attrs:{span:2}},[a("b",[t._v(t._s(t.$t("tradeDetail.packing"))+":")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-input",{staticStyle:{width:"80%"},attrs:{value:t.shipment.shipmentOrderNo,readonly:t.shipmentOrderNoBoole,maxlength:"40",placeholder:"请输入出货单号",autocomplete:"off"},model:{value:t.shipment.shipmentOrderNo,callback:function(e){t.$set(t.shipment,"shipmentOrderNo",e)},expression:"shipment.shipmentOrderNo"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[t._v(t._s(t.$t("tradeDetail.addTime"))+": "),a("br"),a("br"),t._v(t._s(t.$t("tradeDetail.checkTime"))+": ")]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v(t._s(t._f("dateFilter")(t.shipment.createTime))),a("br"),a("br"),t._v(t._s(t._f("dateFilter")(t.shipment.checkTime)))]),t._v(" "),a("el-col",{attrs:{span:8}},[40===t.temp.state&&-1!=t.resourceCode.indexOf("buildShippingList")?a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(e){t.handleAdd()}}},[t._v(t._s(t.$t("tradeDetail.add")))]):a("el-button",{staticClass:"filter-item",attrs:{type:"info"}},[t._v(t._s(t.$t("tradeDetail.add")))]),t._v(" "),50===t.temp.state&&-1!=t.resourceCode.indexOf("verifyShippingList")?a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:function(e){t.checkPass()}}},[t._v(t._s(t.$t("tradeDetail.checkPass")))]):a("el-button",{staticClass:"filter-item",attrs:{type:"info"}},[t._v(t._s(t.$t("tradeDetail.checkPass")))])],1),t._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:t.temp.state>=60?"success":"info",icon:"el-icon-check",circle:""}})],1)],1)],1)],1),t._v(" "),a("el-card",{staticClass:"box-card shipment"},[a("el-row",{staticClass:"text item"},[a("el-col",{attrs:{span:2}},[a("b",[t._v(t._s(t.$t("tradeDetail.shipment"))+":")])]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(t._s(t.packingList.attachName||"暂无"))]),t._v(" "),a("el-col",{attrs:{span:2}},[t._v(t._s(t.$t("tradeDetail.uploadTime"))+": ")]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v(t._s(t._f("dateFilter")(t.packingList.createTime)))]),t._v(" "),a("el-col",{attrs:{span:8}},[t.packingList.attachName&&-1!=t.resourceCode.indexOf("packingListExport")?a("a",{attrs:{href:"/order/attachment/download?attachName="+t.packingList.attachName+"&orderNo="+t.temp.orderNo+"&attachUsage="+t.packingList.attachUsage,target:"_blank"}},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-download"}},[t._v(t._s(t.$t("tradeDetail.export")))])],1):a("a",{on:{click:t.notHasInfo}},[a("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-download"}},[t._v(t._s(t.$t("tradeDetail.export")))])],1),t._v(" "),60===t.temp.state&&-1!=t.resourceCode.indexOf("packingList")?a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-upload"},on:{click:function(e){t.handleExcelUpload("shipment")}}},[t._v(t._s(t.$t("tradeDetail.upload")))]):a("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-upload"}},[t._v(t._s(t.$t("tradeDetail.upload")))])],1),t._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:t.temp.state>=70?"success":"info",icon:"el-icon-check",circle:""}})],1)],1)],1),t._v(" "),a("el-card",{staticClass:"box-card sending"},[a("el-row",{staticClass:"text item"},[a("el-col",{attrs:{span:2}},[a("b",[t._v(t._s(t.$t("tradeDetail.sending"))+":")])]),t._v(" "),a("el-col",{attrs:{span:4}},[t._v(t._s(t.outboundOrder.attachName||"暂无"))]),t._v(" "),a("el-col",{attrs:{span:2}},[t._v(t._s(t.$t("tradeDetail.uploadTime"))+": ")]),t._v(" "),a("el-col",{attrs:{span:3}},[t._v(t._s(t._f("dateFilter")(t.outboundOrder.createTime)))]),t._v(" "),a("el-col",{attrs:{span:8}},[t.outboundOrder.attachName&&-1!=t.resourceCode.indexOf("outboundOrderExport")?a("a",{attrs:{href:"/order/attachment/download?attachName="+t.outboundOrder.attachName+"&orderNo="+t.temp.orderNo+"&attachUsage="+t.outboundOrder.attachUsage,target:"_blank"}},[a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-download"}},[t._v(t._s(t.$t("tradeDetail.export")))])],1):a("a",{on:{click:t.notHasInfo}},[a("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-download"}},[t._v(t._s(t.$t("tradeDetail.export")))])],1),t._v(" "),70===t.temp.state&&-1!=t.resourceCode.indexOf("outboundOrder")?a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-upload"},on:{click:function(e){t.handleExcelUpload("sending")}}},[t._v(t._s(t.$t("tradeDetail.upload")))]):a("el-button",{staticClass:"filter-item",attrs:{type:"info",icon:"el-icon-upload"}},[t._v(t._s(t.$t("tradeDetail.upload")))])],1),t._v(" "),a("el-col",{attrs:{span:1}},[a("el-button",{attrs:{type:t.temp.state>=80?"success":"info",icon:"el-icon-check",circle:""}})],1)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"300px","margin-left":"50px"},attrs:{model:t.temp,"label-position":"left","label-width":"120px"}},[a("el-form-item",{attrs:{label:t.$t("trade.shipmentType"),prop:"shipment_type"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.temp.shipmentType,callback:function(e){t.$set(t.temp,"shipmentType",e)},expression:"temp['shipmentType']"}},t._l(t.shipmentTypeOptions,function(t,e){return a("el-option",{key:t,attrs:{label:e,value:t}})}))],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("table.cancel")))]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateData()}}},[t._v(t._s(t.$t("table.confirm")))])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible,"before-close":t.handleClose,title:"提示",width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v('已有文件"'+t._s(t.orderInfo.attachName)+'"，是否覆盖？')]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleExcelUpload("order")}}},[t._v("确 定")])],1)]),t._v(" "),a("UploadExcel",{ref:"uploadExcel",attrs:{"order-no":t.temp.orderNo,step:t.step,"user-code":t.temp.code},on:{fetchUploadData:function(e){t.fetchData(t.temp.orderNo)}}}),t._v(" "),a("UploadImage",{ref:"uploadImage",attrs:{"order-no":t.temp.orderNo,step:t.step,"user-code":t.temp.code},on:{fetchUploadData:function(e){t.fetchData(t.temp.orderNo)}}})],1)},[],!1,null,"ce00bb14",null));b.options.__file="TradeDetail.vue";var g={name:"EditForm",components:{tradeDetail:b.exports}},x=Object(u.a)(g,function(){var t=this.$createElement;return(this._self._c||t)("trade-detail",{attrs:{"is-edit":!0}})},[],!1,null,null,null);x.options.__file="edit.vue";e.default=x.exports},nhzr:function(t,e,a){a("fW1p"),t.exports=a("WEpk").Object.values},"r/9u":function(t,e,a){},"tu2+":function(t,e,a){},"y/+g":function(t,e,a){"use strict";var o=a("r/9u");a.n(o).a}}]);